const translations = {
  ja: {
    // Nav
    ranking: "ランキング",
    rankingPageTitle: "エロ動画ランキング",
    submit: "投稿",
    search: "検索",
    mypage: "マイページ",
    notifications: "通知",
    signin: "ログイン",
    // Ranking
    sortHot: "人気順",
    sortNew: "新着順",
    period24h: "24時間",
    period1w: "1週間",
    period1m: "1ヶ月",
    periodAll: "全期間",
    noVideos: "この条件に合う動画はまだありません。",
    loadError: "ランキングの読み込みに失敗しました",
    refresh: "更新",
    tag: "タグ",
    moreUsers: "もっと見る →",
    // Categories
    sexy: "セクシー",
    amateur: "素人",
    cosplay: "コスプレ",
    idol: "アイドル",
    gravure: "グラビア",
    dance: "ダンス",
    funny: "おもしろ",
    "cats-animals": "猫・動物",
    sports: "スポーツ",
    music: "音楽",
    gaming: "ゲーム",
    japanese: "日本モノ",
    western: "海外モノ",
    other: "その他",
    allCategories: "すべて",
    // Video detail
    postedBy: "投稿:",
    relatedVideos: "関連動画",
    viewOriginal: "元の動画を見る →",
    report: "通報",
    // Social
    follow: "フォロー",
    unfollow: "フォロー解除",
    followers: "フォロワー",
    following: "フォロー中",
    likes: "いいね",
    // Mypage
    myPage: "マイページ",
    submittedVideos: "投稿した動画",
    likedVideos: "いいねした動画",
    noSubmitted: "まだ動画を投稿していません。",
    noLiked: "まだ動画にいいねしていません。",
    myList: "マイリスト",
    newListName: "新しいリスト名",
    create: "作成",
    noLists: "リストはまだありません。",
    noFollowing: "まだ誰もフォローしていません。",
    categorySettings: "カテゴリ表示設定",
    categorySettingsDesc: "苦手なジャンルを非表示にできます。非表示にしたカテゴリはランキングのタブから消え、「すべて」表示でもフィルタされます。",
    mutedUsers: "ミュート中のユーザー",
    mutedUsersDesc: "ミュートしたユーザーの投稿はランキングに表示されなくなります。",
    noMuted: "ミュート中のユーザーはいません。",
    unmute: "ミュート解除",
    sendFeedback: "フィードバックを送る",
    loginRequired: "ログインが必要です",
    loginRequiredDesc: "マイページを表示するにはログインしてください。",
    loginButton: "ログインする",
    // Submit
    submitVideo: "動画を投稿",
    pasteUrl: "動画のURLを貼り付け",
    comment: "コメント（任意）",
    selectCategory: "カテゴリを選択（最大3つ）",
    addTags: "タグ（Enterで追加）",
    submitButton: "投稿する",
    // Common
    loading: "読み込み中",
    save: "保存",
    cancel: "キャンセル",
    delete: "削除",
    edit: "編集",
    public: "公開",
    private: "非公開",
    // Home
    heroTitle1: "エロ動画ランキング、",
    heroTitle2: "毎日更新中。",
    heroSub1: "Xでバズったセクシー動画を",
    heroSub2: "みんなで集めてランキング化",
    viewRanking: "ランキングを見る",
    submitVideoBtn: "動画を投稿する",
    howItWorks: "かんたん3ステップ",
    howItWorksSub: "Xで見つけたセクシー動画をシェアして、ランキングをつくろう",
    step1Title: "見つける",
    step1Desc: "Xでバズっている動画のURLをコピー",
    step2Title: "投稿する",
    step2Desc: "BuzzClipにURLを貼るだけ カテゴリを選択",
    step3Title: "みんなで育てる",
    step3Desc: "いいねで動画がランキングUP",
    browseCategory: "カテゴリから探す",
    browseCategorySub: "気になるジャンルの動画をチェック",
    ctaTitle: "今すぐ話題の動画を探そう",
    ctaSub: "毎日更新されるランキングで、話題の動画を見逃さない。",
    howToUse: "使い方を見る",
    // Platforms
    allPlatforms: "すべて",
    // Embed
    embedTitle: "埋め込みウィジェット",
    embedDesc: "BuzzClip のランキングをブログやWebサイトに埋め込めます。",
    embedCount: "表示件数",
    embedPeriod: "期間",
    embedTheme: "テーマ",
    themeLight: "ライト",
    themeDark: "ダーク",
    embedPreview: "プレビュー",
    embedCode: "埋め込みコード",
    copy: "コピー",
    copied: "コピー済み!",
    // Search
    searchPlaceholder: "動画・ユーザーを検索...",
    // Ranking page
    contributorRanking: "Weekly 投稿者ランキング",
    // Video detail
    backToRanking: "ランキングに戻る",
    videoNotFound: "動画が見つかりませんでした",
    videoNotFoundShort: "動画が見つかりません",
    viewVideo: "動画を見る",
    // Submit page
    submitDesc: "X, YouTube, TikTokの動画URLを貼り付けて、カテゴリを選んで投稿しよう。",
    enterUrl: "動画URLを入力",
    urlVerified: "URL確認済み",
    oneComment: "ひとこと（任意）",
    commentPlaceholder: "おすすめポイントなど #タグ も使えます",
    hashtagNote: "#を付けるとタグになります（最大5つ）",
    selectCategoryError: "カテゴリを1つ以上選択してください",
    submitting: "投稿中...",
    submitFailed: "投稿に失敗しました",
    loginRequiredSubmit: "動画を投稿するにはログインしてください。",
    // Mypage extras
    deleteAvatar: "画像を削除",
    avatarFormats: "JPEG、PNG、WebP のみ対応しています",
    avatarSizeLimit: "2MB以下の画像を選んでください",
    uploadFailed: "アップロードに失敗しました",
    deleteFailed: "削除に失敗しました",
    changeName: "名前を変更",
    nameLength: "1〜50文字で入力してください",
    nameChangeFailed: "名前の変更に失敗しました",
    editPost: "投稿を編集",
    commentMax200: "コメント（200文字以内）",
    categoryMax3: "カテゴリ（最大3つ）",
    saving: "保存中...",
    editFailed: "編集に失敗しました",
    confirmDelete: "この投稿を削除しますか？",
    profileError: "プロフィールの取得に失敗しました",
    createListFailed: "リストの作成に失敗しました",
    items: "件",
    unfollowFailed: "フォロー解除に失敗しました",
    // Playlist
    addToList: "リストに追加",
    noListsAvailable: "リストがありません",
    defaultFavorites: "お気に入り",
    // Search page
    searchInputPlaceholder: "動画タイトル、投稿者名で検索...",
    searchResultsFor: "の検索結果:",
    searchResultCount: "件",
    noSearchResults: "該当する動画が見つかりませんでした。",
    searching: "検索中",
    // Submit popover
    loginRequiredPost: "投稿するにはログインが必要です",
    pasteVideoUrl: "動画URLを貼り付け（X, YouTube, TikTok）",
    invalidVideoUrl: "X, YouTube, TikTokの動画URLを入力してください",
    categoryLabelMax3: "カテゴリ（最大3つ）",
    commentShortPlaceholder: "ひとこと（任意）#タグも使えます",
    // Footer
    footerHowToUse: "使い方",
    addToHomeScreen: "ホーム画面に追加",
    footerFeedback: "フィードバック",
    // Age gate
    ageGateTitle: "年齢確認",
    ageGateDesc: "このサイトは成人向けコンテンツを含みます。18歳以上の方のみ閲覧できます。",
    ageGateYes: "18歳以上です — 入場する",
    ageGateNo: "18歳未満です — 退出する",
    ageGateNote: "「入場する」を押すことで、あなたが18歳以上であることを確認したものとみなします。",
  },
  en: {
    // Nav
    ranking: "Ranking",
    rankingPageTitle: "Sexy Video Rankings",
    submit: "Submit",
    search: "Search",
    mypage: "My Page",
    notifications: "Notifications",
    signin: "Sign In",
    // Ranking
    sortHot: "Popular",
    sortNew: "New",
    period24h: "24h",
    period1w: "1 Week",
    period1m: "1 Month",
    periodAll: "All Time",
    noVideos: "No videos found for this filter.",
    loadError: "Failed to load rankings",
    refresh: "Refresh",
    tag: "Tag",
    moreUsers: "See more →",
    // Categories
    sexy: "Sexy",
    amateur: "Amateur",
    cosplay: "Cosplay",
    idol: "Idol",
    gravure: "Gravure",
    dance: "Dance",
    funny: "Funny",
    "cats-animals": "Cats & Animals",
    sports: "Sports",
    music: "Music",
    gaming: "Gaming",
    japanese: "Japanese",
    western: "Western",
    other: "Other",
    allCategories: "All",
    // Video detail
    postedBy: "Posted by",
    relatedVideos: "Related Videos",
    viewOriginal: "View Original →",
    report: "Report",
    // Social
    follow: "Follow",
    unfollow: "Unfollow",
    followers: "Followers",
    following: "Following",
    likes: "Likes",
    // Mypage
    myPage: "My Page",
    submittedVideos: "Submitted Videos",
    likedVideos: "Liked Videos",
    noSubmitted: "You haven't submitted any videos yet.",
    noLiked: "You haven't liked any videos yet.",
    myList: "My Lists",
    newListName: "New list name",
    create: "Create",
    noLists: "No lists yet.",
    noFollowing: "You're not following anyone yet.",
    categorySettings: "Category Visibility",
    categorySettingsDesc: "Hide categories you don't like. Hidden categories won't appear in ranking tabs or the 'All' view.",
    mutedUsers: "Muted Users",
    mutedUsersDesc: "Posts from muted users won't appear in rankings.",
    noMuted: "No muted users.",
    unmute: "Unmute",
    sendFeedback: "Send Feedback",
    loginRequired: "Login Required",
    loginRequiredDesc: "Please sign in to view your page.",
    loginButton: "Sign In",
    // Submit
    submitVideo: "Submit Video",
    pasteUrl: "Paste video URL",
    comment: "Comment (optional)",
    selectCategory: "Select categories (max 3)",
    addTags: "Tags (press Enter to add)",
    submitButton: "Submit",
    // Common
    loading: "Loading",
    save: "Save",
    cancel: "Cancel",
    delete: "Delete",
    edit: "Edit",
    public: "Public",
    private: "Private",
    // Home
    heroTitle1: "Sexy Video Rankings,",
    heroTitle2: "Updated Daily.",
    heroSub1: "Discover viral sexy videos from X,",
    heroSub2: "ranked by community votes",
    viewRanking: "View Rankings",
    submitVideoBtn: "Submit a Video",
    howItWorks: "How It Works",
    howItWorksSub: "Share sexy videos from X and build the ranking together",
    step1Title: "Find",
    step1Desc: "Copy the URL of a viral video from X",
    step2Title: "Submit",
    step2Desc: "Paste the URL on BuzzClip and pick a category",
    step3Title: "Grow Together",
    step3Desc: "Likes push videos up the ranking",
    browseCategory: "Browse by Category",
    browseCategorySub: "Explore trending videos in your favorite genres",
    ctaTitle: "Discover Trending Videos Now",
    ctaSub: "Never miss trending videos with daily updated rankings.",
    howToUse: "How to Use",
    // Platforms
    allPlatforms: "All",
    // Embed
    embedTitle: "Embed Widget",
    embedDesc: "Embed BuzzClip rankings on your blog or website.",
    embedCount: "Count",
    embedPeriod: "Period",
    embedTheme: "Theme",
    themeLight: "Light",
    themeDark: "Dark",
    embedPreview: "Preview",
    embedCode: "Embed Code",
    copy: "Copy",
    copied: "Copied!",
    // Search
    searchPlaceholder: "Search videos & users...",
    // Ranking page
    contributorRanking: "Weekly Contributor Ranking",
    // Video detail
    backToRanking: "Back to Rankings",
    videoNotFound: "Video not found",
    videoNotFoundShort: "Video not found",
    viewVideo: "View Video",
    // Submit page
    submitDesc: "Paste a video URL from X, YouTube, or TikTok, pick a category, and submit.",
    enterUrl: "Enter video URL",
    urlVerified: "URL verified",
    oneComment: "Comment (optional)",
    commentPlaceholder: "Share your thoughts... #tags work too",
    hashtagNote: "Use # to add tags (max 5)",
    selectCategoryError: "Please select at least one category",
    submitting: "Submitting...",
    submitFailed: "Failed to submit",
    loginRequiredSubmit: "Please sign in to submit videos.",
    // Mypage extras
    deleteAvatar: "Remove photo",
    avatarFormats: "Only JPEG, PNG, WebP supported",
    avatarSizeLimit: "Image must be under 2MB",
    uploadFailed: "Upload failed",
    deleteFailed: "Failed to delete",
    changeName: "Change name",
    nameLength: "Must be 1-50 characters",
    nameChangeFailed: "Failed to change name",
    editPost: "Edit Post",
    commentMax200: "Comment (max 200)",
    categoryMax3: "Categories (max 3)",
    saving: "Saving...",
    editFailed: "Failed to edit",
    confirmDelete: "Delete this post?",
    profileError: "Failed to load profile",
    createListFailed: "Failed to create list",
    items: "items",
    unfollowFailed: "Failed to unfollow",
    // Playlist
    addToList: "Add to List",
    noListsAvailable: "No lists available",
    defaultFavorites: "Favorites",
    // Search page
    searchInputPlaceholder: "Search by title or author...",
    searchResultsFor: "results for",
    searchResultCount: "",
    noSearchResults: "No videos found for this search.",
    searching: "Searching",
    // Submit popover
    loginRequiredPost: "Please sign in to submit videos",
    pasteVideoUrl: "Paste video URL (X, YouTube, TikTok)",
    invalidVideoUrl: "Please enter a valid X, YouTube, or TikTok video URL",
    categoryLabelMax3: "Category (max 3)",
    commentShortPlaceholder: "Add a comment... #tags work too",
    // Footer
    footerHowToUse: "How to Use",
    addToHomeScreen: "Add to Home Screen",
    footerFeedback: "Feedback",
    // Age gate
    ageGateTitle: "Age Verification",
    ageGateDesc: "This site contains adult content. You must be 18 or older to enter.",
    ageGateYes: "I am 18 or older — Enter",
    ageGateNo: "I am under 18 — Leave",
    ageGateNote: "By clicking \"Enter\", you confirm that you are at least 18 years old.",
  },
} as const;

export type Locale = "ja" | "en";
export type TranslationKey = keyof typeof translations.ja;

let currentLocale: Locale | null = null;

export function getLocale(): Locale {
  if (currentLocale) return currentLocale;

  if (typeof window !== "undefined") {
    // 1. localStorage override
    const stored = localStorage.getItem("lang");
    if (stored === "en" || stored === "ja") {
      currentLocale = stored;
      return stored;
    }

    // 2. Browser language
    const browserLang = navigator.language || "";
    if (browserLang.startsWith("ja")) {
      currentLocale = "ja";
      return "ja";
    }
  }

  // Default: English for non-Japanese browsers
  currentLocale = "en";
  return "en";
}

export function setLocale(locale: Locale) {
  currentLocale = locale;
  if (typeof window !== "undefined") {
    localStorage.setItem("lang", locale);
  }
}

export function t(key: TranslationKey): string {
  const locale = getLocale();
  return translations[locale][key] || translations.ja[key] || key;
}
